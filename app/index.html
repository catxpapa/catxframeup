<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>喵妙框</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- 1. 顶部导航栏 -->
      <header class="top-nav">
        <img src="assets/logo.png" alt="喵妙框 Logo" class="logo" />
        <nav>
          <button id="nav-image" class="nav-button active" data-mode="image">
            1. 图片
          </button>
          <button id="nav-frame" class="nav-button" data-mode="frame">
            2. 边框
          </button>
          <button id="nav-decoration" class="nav-button" data-mode="decoration">
            3. 装饰
          </button>
          <button id="nav-save" class="nav-button" data-mode="save">
            4. 导出
          </button>
        </nav>
      </header>

      <!-- 2. 统一Canvas编辑区 -->
      <main class="main-editor">
        <!-- 图片上传占位符 -->
        <div id="upload-placeholder" class="placeholder-image">
          <div class="upload-instructions">
            <span class="upload-hint">将文件拖拽到此处，或</span>
            <div class="upload-buttons-container">
              <button class="upload-button">从本地上传</button>
            </div>
          </div>
        </div>

        <!-- 边框控件 -->
        <div id="border-controls" class="editor-controls">
          <label for="border-width-slider">边框宽度:</label>
          <input
            type="range"
            id="border-width-slider"
            min="1"
            max="25"
            value="10"
            step="0.5"
          />
          <span id="border-width-label">10%</span>
        </div>

        <!-- 装饰控件 -->
        <div id="decoration-controls" class="editor-controls">
          <label for="decoration-scale-slider">装饰缩放:</label>
          <input
            type="range"
            id="decoration-scale-slider"
            min="0.1"
            max="3"
            value="1"
            step="0.1"
          />
          <span id="decoration-scale-label">100%</span>

          <label for="decoration-rotation-slider">装饰旋转:</label>
          <input
            type="range"
            id="decoration-rotation-slider"
            min="0"
            max="360"
            value="0"
            step="5"
          />
          <span id="decoration-rotation-label">0°</span>

          <button id="delete-decoration-btn" class="delete-btn">
            删除装饰
          </button>
        </div>

        <!-- 保存选项 -->
        <div id="save-options" class="save-options">
          <button>下载到本地</button>
          <button id="copy-to-clipboard-btn">复制到剪贴板</button>
        </div>
      </main>

      <!-- 3. 底部素材栏 -->
      <footer class="bottom-assets">
        <!-- 修改图片素材区域 -->
        <div id="assets-image" class="assets-view active">
          <!-- 添加管理按钮 -->
          <div class="asset-management">
            <button id="upload-image-btn" class="management-btn">
              上传图片
            </button>
            <button id="clear-uploads-btn" class="management-btn danger">
              清空上传
            </button>
            <button id="refresh-uploads-btn" class="management-btn">
              刷新列表
            </button>
          </div>

  

          <!-- 动态加载的用户上传图片将插入到这里 -->
          <div id="user-uploads-container"></div>
        </div>


        <!-- 修改边框素材区域 -->
        <div id="assets-frame" class="assets-view">
          <!-- 添加管理按钮 -->
          <div class="asset-management">
            <button id="upload-frame-btn" class="management-btn">
              上传边框
            </button>
            <button id="reset-assets-btn" class="management-btn">
              重置素材
            </button>
            <button id="refresh-frames-btn" class="management-btn">
              刷新列表
            </button>
          </div>



          <!-- 动态加载的边框将插入到这里 -->
          <div id="dynamic-frames-container"></div>
        </div>
        <!-- 修改装饰素材区域 -->
        <div id="assets-decoration" class="assets-view">
          <!-- 添加管理按钮 -->
          <div class="asset-management">
            <button id="upload-decoration-btn" class="management-btn">
              上传装饰
            </button>
            <button id="refresh-decorations-btn" class="management-btn">
              刷新列表
            </button>
          </div>


          <!-- 动态加载的装饰将插入到这里 -->
          <div id="dynamic-decorations-container"></div>
        </div>
        <!-- 修改保存/历史作品区域 -->
        <div id="assets-save" class="assets-view">
          <!-- 添加管理按钮 -->
          <div class="asset-management">
            <button id="save-current-btn" class="management-btn primary">
              保存当前作品
            </button>
            <button id="clear-history-btn" class="management-btn danger">
              清空历史
            </button>
            <button id="refresh-history-btn" class="management-btn">
              刷新列表
            </button>
          </div>

          <!-- 动态加载的历史作品将插入到这里 -->
          <div id="history-container"></div>
        </div>
      </footer>
    </div>

    <!-- 在body结束标签前添加上传对话框 -->
<div id="upload-dialogs" style="display: none;">
  <!-- 图片上传对话框 -->
  <div id="image-upload-dialog" class="upload-dialog">
    <div class="dialog-content">
      <h3 >上传图片</h3>
      <input type="file" id="image-file-input" accept="image/*" />
      <div class="dialog-buttons">
        <button id="confirm-image-upload">确认上传</button>
        <button id="cancel-image-upload">取消</button>
      </div>
    </div>
  </div>
  
  <!-- 边框上传对话框 -->
  <div id="frame-upload-dialog" class="upload-dialog">
    <div class="dialog-content">
      <h3>上传边框</h3>
      <input type="file" id="frame-file-input" accept="image/*" />
      <textarea id="frame-settings-input" placeholder="请输入边框设置JSON...">
{
  "slice": "160 150 100 150",
  "width": "160 150 100 150", 
  "outset": "100 100 80 100",
  "repeat": "stretch"
}</textarea>
      <div class="dialog-buttons">
        <button id="confirm-frame-upload">确认上传</button>
        <button id="cancel-frame-upload">取消</button>
      </div>
    </div>
  </div>
  
  <!-- 装饰上传对话框 -->
  <div id="decoration-upload-dialog" class="upload-dialog">
    <div class="dialog-content">
      <h3>上传装饰</h3>
      <input type="file" id="decoration-file-input" accept="image/*" />
      <textarea id="decoration-settings-input" placeholder="请输入装饰设置JSON（可选）...">
{
  "defaultScale": 0.1
}</textarea>
      <div class="dialog-buttons">
        <button id="confirm-decoration-upload">确认上传</button>
        <button id="cancel-decoration-upload">取消</button>
      </div>
    </div>
  </div>
</div>
<script src="api.js"></script>
    <script src="script.js"></script>


  </body>
</html>
